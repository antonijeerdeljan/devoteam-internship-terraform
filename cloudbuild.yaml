# cloudbuild.yaml

options:
  logging: CLOUD_LOGGING_ONLY

steps:
  - id: 'Terraform Init'
    name: 'hashicorp/terraform:latest'
    args: ['init']
  - id: 'Terraform Plan'
    name: 'hashicorp/terraform:latest'
    args: ['plan', '-out=plan.tfout']
  - id: 'Terraform Apply'
    name: 'hashicorp/terraform:latest'
    args: ['apply', 'plan.tfout']

artifacts:
  objects:
    location: 'gs://devoteam-app/'
    paths: ['plan.tfout']
